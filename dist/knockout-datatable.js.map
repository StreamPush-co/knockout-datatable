{"version":3,"sources":["knockout-datatable.js"],"names":["this","DataTable","rows","options","serverSideOpts","Array","recordWord","recordWordPlural","sortDir","sortField","perPage","filterFn","unsortedClass","descSortClass","ascSortClass","initObservables","serverSidePagination","enabled","path","loader","Error","paginationPath","resultHandlerFn","initWithServerSidePagination","initWithClientSidePagination","primitiveCompare","pureComputed","ko","computed","item1","item2","undefined","toString","toLowerCase","indexOf","prototype","observable","currentPage","filter","loading","observableArray","_defaultMatch","self","filtering","subscribe","rowAttributeMap","_this","attrMap","key","row","length","hasOwnProperty","filteredRows","slice","sort","a","b","aVal","bVal","utils","unwrapObservable","extend","rateLimit","method","pagedRows","pageIndex","pages","Math","ceil","leftPagerClass","rightPagerClass","total","from","to","recordsText","showNoData","showLoading","sortClass","column","addRecord","record","push","removeRecord","remove","prevPage","replaceRows","val","_results","some","isObservable","filterVar","specials","split","forEach","word","words","join","conditionals","rowAttr","match","_gatherData","_getDataFromServer","data","cb","req","url","encodeURIComponent","XMLHttpRequest","open","setRequestHeader","onload","status","JSON","parse","responseText","onerror","send","page","sortBy","numFilteredRows","err","response","results","console","log","map","refreshData","toggleSort","field","nextPage","gotoPage","pageClass","call"],"mappings":"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","file":"knockout-datatable.js","sourcesContent":["(function() {\n\n  this.DataTable = (function() {\n    var primitiveCompare, pureComputed;\n\n    pureComputed = ko.pureComputed || ko.computed;\n\n    primitiveCompare = function(item1, item2) {\n      if (item2 === null || item2 === undefined) {\n        return item1 === null || item1 === undefined;\n      } else if (item1 !== null && item1 !== undefined) {\n        if ('boolean' === typeof item1) {\n          return item1 === item2;\n        } else {\n          return item1.toString().toLowerCase().indexOf(item2.toString().toLowerCase()) >= 0 || item1 === item2;\n        }\n      } else {\n        return false;\n      }\n    };\n\n    function DataTable(rows, options) {\n      var serverSideOpts;\n      if (!options) {\n        if (!(rows instanceof Array)) {\n          options = rows;\n          rows = [];\n        } else {\n          options = {};\n        }\n      }\n      this.options = {\n        recordWord: options.recordWord || 'record',\n        recordWordPlural: options.recordWordPlural,\n        sortDir: options.sortDir || 'asc',\n        sortField: options.sortField || void 0,\n        perPage: options.perPage || 15,\n        filterFn: options.filterFn || void 0,\n        unsortedClass: options.unsortedClass || '',\n        descSortClass: options.descSortClass || '',\n        ascSortClass: options.ascSortClass || ''\n      };\n      this.initObservables();\n      if ((serverSideOpts = options.serverSidePagination) && serverSideOpts.enabled) {\n        if (!(serverSideOpts.path && serverSideOpts.loader)) {\n          throw new Error(\"`path` or `loader` missing from `serverSidePagination` object\");\n        }\n        this.options.paginationPath = serverSideOpts.path;\n        this.options.resultHandlerFn = serverSideOpts.loader;\n        this.initWithServerSidePagination();\n      } else {\n        this.initWithClientSidePagination(rows);\n      }\n    }\n\n    DataTable.prototype.initObservables = function() {\n      this.sortDir = ko.observable(this.options.sortDir);\n      this.sortField = ko.observable(this.options.sortField);\n      this.perPage = ko.observable(this.options.perPage);\n      this.currentPage = ko.observable(1);\n      this.filter = ko.observable('');\n      this.loading = ko.observable(false);\n      this.rows = ko.observableArray([]);\n    };\n\n    DataTable.prototype.initWithClientSidePagination = function(rows) {\n      var _defaultMatch, self = this;\n      this.filtering = ko.observable(false);\n      this.filter.subscribe(function() {\n        self.currentPage(1);\n      });\n      this.perPage.subscribe(function() {\n        self.currentPage(1);\n      });\n      this.rows(rows);\n      this.rowAttributeMap = pureComputed((function(_this) {\n        return function() {\n          var attrMap, key, row;\n          rows = _this.rows();\n          attrMap = {};\n          if (rows.length > 0) {\n            row = rows[0];\n            for (key in row) {\n              if (row.hasOwnProperty(key)) {\n                attrMap[key.toLowerCase()] = key;\n              }\n            }\n          }\n          return attrMap;\n        };\n      })(this));\n      this.filteredRows = pureComputed((function(_this) {\n        return function() {\n          var filter, filterFn, sortField;\n          _this.filtering(true);\n          filter = _this.filter();\n          rows = _this.rows.slice(0);\n          if (filter !== '') {\n            filterFn = _this.filterFn(filter);\n            rows = rows.filter(filterFn);\n          }\n          if ((sortField = _this.sortField()) || sortField === 0) {\n            rows.sort(function(a, b) {\n              var aVal, bVal;\n              aVal = ko.utils.unwrapObservable(a[sortField]);\n              bVal = ko.utils.unwrapObservable(b[sortField]);\n              if ('string' === typeof aVal) {\n                aVal = aVal.toLowerCase();\n              }\n              if ('string' == typeof bVal) {\n                bVal = bVal.toLowerCase();\n              }\n              if (_this.sortDir() === 'asc') {\n                if (aVal < bVal || aVal === '' || aVal === null || aVal === undefined) {\n                  return -1;\n                } else {\n                  if (aVal > bVal || bVal === '' || bVal === null || bVal === undefined) {\n                    return 1;\n                  } else {\n                    return 0;\n                  }\n                }\n              } else {\n                if (aVal < bVal || aVal === '' || aVal === null || aVal === undefined) {\n                  return 1;\n                } else {\n                  if (aVal > bVal || bVal === '' || bVal === null || bVal === undefined) {\n                    return -1;\n                  } else {\n                    return 0;\n                  }\n                }\n              }\n            });\n          }\n          _this.filtering(false);\n          return rows;\n        };\n      })(this)).extend({\n        rateLimit: 50,\n        method: 'notifyWhenChangesStop'\n      });\n      this.pagedRows = pureComputed((function(_this) {\n        return function() {\n          var pageIndex, perPage;\n          pageIndex = _this.currentPage() - 1;\n          perPage = _this.perPage();\n          return _this.filteredRows().slice(pageIndex * perPage, (pageIndex + 1) * perPage);\n        };\n      })(this));\n      this.pages = pureComputed((function(_this) {\n        return function() {\n          return Math.ceil(_this.filteredRows().length / _this.perPage());\n        };\n      })(this));\n      this.leftPagerClass = pureComputed((function(_this) {\n        return function() {\n          if (_this.currentPage() === 1) {\n            return 'disabled';\n          }\n        };\n      })(this));\n      this.rightPagerClass = pureComputed((function(_this) {\n        return function() {\n          if (_this.currentPage() === _this.pages()) {\n            return 'disabled';\n          }\n        };\n      })(this));\n      this.total = pureComputed((function(_this) {\n        return function() {\n          return _this.filteredRows().length;\n        };\n      })(this));\n      this.from = pureComputed((function(_this) {\n        return function() {\n          return (_this.currentPage() - 1) * _this.perPage() + 1;\n        };\n      })(this));\n      this.to = pureComputed((function(_this) {\n        return function() {\n          var to;\n          to = _this.currentPage() * _this.perPage();\n          if (to > _this.total()) {\n            return _this.total();\n          } else {\n            return to;\n          }\n        };\n      })(this));\n      this.recordsText = pureComputed((function(_this) {\n        return function() {\n          var from, pages, recordWord, recordWordPlural, to, total;\n          pages = _this.pages();\n          total = _this.total();\n          from = _this.from();\n          to = _this.to();\n          recordWord = _this.options.recordWord;\n          recordWordPlural = _this.options.recordWordPlural || recordWord + 's';\n          if (pages > 1) {\n            return \"\" + from + \" to \" + to + \" of \" + total + \" \" + recordWordPlural;\n          } else {\n            return \"\" + total + \" \" + (total > 1 || total === 0 ? recordWordPlural : recordWord);\n          }\n        };\n      })(this));\n      this.showNoData = pureComputed((function(_this) {\n        return function() {\n          return _this.pagedRows().length === 0 && !_this.loading();\n        };\n      })(this));\n      this.showLoading = pureComputed((function(_this) {\n        return function() {\n          return _this.loading();\n        };\n      })(this));\n      this.sortClass = (function(_this) {\n        return function(column) {\n          return pureComputed(function() {\n            if (_this.sortField() === column) {\n              return 'sorted ' + (_this.sortDir() === 'asc' ? _this.options.ascSortClass : _this.options.descSortClass);\n            } else {\n              return _this.options.unsortedClass;\n            }\n          });\n        };\n      })(this);\n      this.addRecord = (function(_this) {\n        return function(record) {\n          return _this.rows.push(record);\n        };\n      })(this);\n      this.removeRecord = (function(_this) {\n        return function(record) {\n          _this.rows.remove(record);\n          if (_this.pagedRows().length === 0) {\n            return _this.prevPage();\n          }\n        };\n      })(this);\n      this.replaceRows = (function(_this) {\n        return function(rows) {\n          _this.rows(rows);\n          _this.currentPage(1);\n          return _this.filter(void 0);\n        };\n      })(this);\n      _defaultMatch = function(filter, row, attrMap) {\n        var key, val;\n        return ((function() {\n          var _results;\n          _results = [];\n          for (key in attrMap) {\n            val = attrMap[key];\n            _results.push(val);\n          }\n          return _results;\n        })()).some(function(val) {\n          return primitiveCompare((ko.isObservable(row[val]) ? row[val]() : row[val]), filter);\n        });\n      };\n      this.filterFn = this.options.filterFn || (function(_this) {\n        return function(filterVar) {\n          var filter = [], specials = {};\n          filterVar.split(' ').forEach(function(word) {\n            var words;\n            if (word.indexOf(':') >= 0) {\n              words = word.split(':');\n              specials[words[0]] = (function() {\n                switch (words[1].toLowerCase()) {\n                  case 'yes':\n                  case 'true':\n                    return true;\n                  case 'no':\n                  case 'false':\n                    return false;\n                  case 'blank':\n                  case 'none':\n                  case 'null':\n                  case 'undefined':\n                    return void 0;\n                  default:\n                    return words[1].toLowerCase();\n                }\n              })();\n            } else {\n              filter.push(word);\n            }\n          });\n          filter = filter.join(' ');\n          return function(row) {\n            var conditionals = [], key, val;\n            for (key in specials) {\n              val = specials[key];\n              var rowAttr = _this.rowAttributeMap()[key.toLowerCase()];\n              if (rowAttr) {\n                conditionals.push(primitiveCompare((ko.isObservable(row[rowAttr]) ? row[rowAttr]() : row[rowAttr]), val));\n              } else {\n                conditionals.push(false);\n              }\n            }\n            if (conditionals.indexOf(false) === -1) {\n              if (filter !== '') {\n                if ('function' === typeof row.match) {\n                  return row.match(filter);\n                } else {\n                  return _defaultMatch(filter, row, _this.rowAttributeMap());\n                }\n              } else {\n                return true;\n              }\n            } else {\n              return false;\n            }\n          };\n        };\n      })(this);\n    };\n\n    DataTable.prototype.initWithServerSidePagination = function() {\n      var _gatherData, _getDataFromServer;\n      _getDataFromServer = (function(_this) {\n        return function(data, cb) {\n          var key, req, url, val;\n          url = \"\" + _this.options.paginationPath + \"?\" + (((function() {\n            var _results;\n            _results = [];\n            for (key in data) {\n              val = data[key];\n              _results.push(\"\" + (encodeURIComponent(key)) + \"=\" + (encodeURIComponent(val)));\n            }\n            return _results;\n          })()).join('&'));\n          req = new XMLHttpRequest();\n          req.open('GET', url, true);\n          req.setRequestHeader('Content-Type', 'application/json');\n          req.onload = function() {\n            if (req.status >= 200 && req.status < 400) {\n              return cb(null, JSON.parse(req.responseText));\n            } else {\n              return cb(new Error(\"Error communicating with server\"));\n            }\n          };\n          req.onerror = function() {\n            return cb(new Error(\"Error communicating with server\"));\n          };\n          return req.send();\n        };\n      })(this);\n      _gatherData = function(perPage, currentPage, filter, sortDir, sortField) {\n        var data;\n        data = {\n          perPage: perPage,\n          page: currentPage\n        };\n        if (filter || filter === 0) {\n          data.filter = filter;\n        }\n        if ((sortDir || sortDir === 0) && (sortField || sortField === 0)) {\n          data.sortDir = sortDir;\n          data.sortBy = sortField;\n        }\n        return data;\n      };\n      this.filtering = ko.observable(false);\n      this.pagedRows = ko.observableArray([]);\n      this.numFilteredRows = ko.observable(0);\n      this.filter.subscribe((function(_this) {\n        return function() {\n          return _this.currentPage(1);\n        };\n      })(this));\n      this.perPage.subscribe((function(_this) {\n        return function() {\n          return _this.currentPage(1);\n        };\n      })(this));\n      ko.computed((function(_this) {\n        return function() {\n          var data;\n          _this.loading(true);\n          _this.filtering(true);\n          data = _gatherData(_this.perPage(), _this.currentPage(), _this.filter(), _this.sortDir(), _this.sortField());\n          return _getDataFromServer(data, function(err, response) {\n            var results, total;\n            _this.loading(false);\n            _this.filtering(false);\n            if (err) {\n              return console.log(err);\n            }\n            total = response.total;\n            results = response.results;\n            _this.numFilteredRows(total);\n            return _this.pagedRows(results.map(_this.options.resultHandlerFn));\n          });\n        };\n      })(this)).extend({\n        rateLimit: 500,\n        method: 'notifyWhenChangesStop'\n      });\n      this.pages = pureComputed((function(_this) {\n        return function() {\n          return Math.ceil(_this.numFilteredRows() / _this.perPage());\n        };\n      })(this));\n      this.leftPagerClass = pureComputed((function(_this) {\n        return function() {\n          if (_this.currentPage() === 1) {\n            return 'disabled';\n          }\n        };\n      })(this));\n      this.rightPagerClass = pureComputed((function(_this) {\n        return function() {\n          if (_this.currentPage() === _this.pages()) {\n            return 'disabled';\n          }\n        };\n      })(this));\n      this.from = pureComputed((function(_this) {\n        return function() {\n          return (_this.currentPage() - 1) * _this.perPage() + 1;\n        };\n      })(this));\n      this.to = pureComputed((function(_this) {\n        return function() {\n          var to, total;\n          to = _this.currentPage() * _this.perPage();\n          if (to > (total = _this.numFilteredRows())) {\n            return total;\n          } else {\n            return to;\n          }\n        };\n      })(this));\n      this.recordsText = pureComputed((function(_this) {\n        return function() {\n          var from, pages, recordWord, recordWordPlural, to, total;\n          pages = _this.pages();\n          total = _this.numFilteredRows();\n          from = _this.from();\n          to = _this.to();\n          recordWord = _this.options.recordWord;\n          recordWordPlural = _this.options.recordWordPlural || recordWord + 's';\n          if (pages > 1) {\n            return \"\" + from + \" to \" + to + \" of \" + total + \" \" + recordWordPlural;\n          } else {\n            return \"\" + total + \" \" + (total > 1 || total === 0 ? recordWordPlural : recordWord);\n          }\n        };\n      })(this));\n      this.showNoData = pureComputed((function(_this) {\n        return function() {\n          return _this.pagedRows().length === 0 && !_this.loading();\n        };\n      })(this));\n      this.showLoading = pureComputed((function(_this) {\n        return function() {\n          return _this.loading();\n        };\n      })(this));\n      this.sortClass = (function(_this) {\n        return function(column) {\n          return pureComputed(function() {\n            if (_this.sortField() === column) {\n              return 'sorted ' + (_this.sortDir() === 'asc' ? _this.options.ascSortClass : _this.options.descSortClass);\n            } else {\n              return _this.options.unsortedClass;\n            }\n          });\n        };\n      })(this);\n      this.addRecord = function() {\n        throw new Error(\"#addRecord() not applicable with serverSidePagination enabled\");\n      };\n      this.removeRecord = function() {\n        throw new Error(\"#removeRecord() not applicable with serverSidePagination enabled\");\n      };\n      this.replaceRows = function() {\n        throw new Error(\"#replaceRows() not applicable with serverSidePagination enabled\");\n      };\n      this.refreshData = (function(_this) {\n        return function() {\n          var data;\n          _this.loading(true);\n          _this.filtering(true);\n          data = _gatherData(_this.perPage(), _this.currentPage(), _this.filter(), _this.sortDir(), _this.sortField());\n          return _getDataFromServer(data, function(err, response) {\n            var results, total;\n            _this.loading(false);\n            _this.filtering(false);\n            if (err) {\n              return console.log(err);\n            }\n            total = response.total;\n            results = response.results;\n            _this.numFilteredRows(total);\n            return _this.pagedRows(results.map(_this.options.resultHandlerFn));\n          });\n        };\n      })(this);\n    };\n\n    DataTable.prototype.toggleSort = function(field) {\n      return (function(_this) {\n        return function() {\n          _this.currentPage(1);\n          if (_this.sortField() === field) {\n            return _this.sortDir(_this.sortDir() === 'asc' ? 'desc' : 'asc');\n          } else {\n            _this.sortDir('asc');\n            return _this.sortField(field);\n          }\n        };\n      })(this);\n    };\n\n    DataTable.prototype.prevPage = function() {\n      var page;\n      page = this.currentPage();\n      if (page !== 1) {\n        return this.currentPage(page - 1);\n      }\n    };\n\n    DataTable.prototype.nextPage = function() {\n      var page;\n      page = this.currentPage();\n      if (page !== this.pages()) {\n        return this.currentPage(page + 1);\n      }\n    };\n\n    DataTable.prototype.gotoPage = function(page) {\n      return (function(_this) {\n        return function() {\n          return _this.currentPage(page);\n        };\n      })(this);\n    };\n\n    DataTable.prototype.pageClass = function(page) {\n      return pureComputed((function(_this) {\n        return function() {\n          if (_this.currentPage() === page) {\n            return 'active';\n          }\n        };\n      })(this));\n    };\n\n    return DataTable;\n\n  })();\n\n}).call(this);\n"],"sourceRoot":"/source/"}