{"version":3,"sources":["knockout-datatable.js"],"names":["__indexOf","indexOf","item","i","l","this","length","DataTable","rows","options","serverSideOpts","Array","recordWord","recordWordPlural","sortDir","sortField","perPage","filterFn","unsortedClass","descSortClass","ascSortClass","initObservables","serverSidePagination","enabled","path","loader","Error","paginationPath","resultHandlerFn","initWithServerSidePagination","initWithClientSidePagination","primitiveCompare","pureComputed","ko","computed","item1","item2","undefined","toString","toLowerCase","prototype","observable","currentPage","filter","loading","observableArray","_defaultMatch","filtering","subscribe","_this","rowAttributeMap","attrMap","key","row","hasOwnProperty","filteredRows","slice","sort","a","b","aVal","bVal","utils","unwrapObservable","extend","rateLimit","method","pagedRows","pageIndex","pages","Math","ceil","leftPagerClass","rightPagerClass","total","from","to","recordsText","showNoData","showLoading","sortClass","column","addRecord","record","push","removeRecord","remove","prevPage","replaceRows","val","_results","some","isObservable","filterVar","specials","split","forEach","word","words","join","conditionals","rowAttr","call","match","_gatherData","_getDataFromServer","data","cb","req","url","encodeURIComponent","XMLHttpRequest","open","setRequestHeader","onload","status","JSON","parse","responseText","onerror","send","page","sortBy","numFilteredRows","err","response","results","console","log","map","refreshData","toggleSort","field","nextPage","gotoPage","pageClass"],"mappings":"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","file":"knockout-datatable.js","sourcesContent":["(function() {\n  var __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  this.DataTable = (function() {\n    var primitiveCompare, pureComputed;\n\n    pureComputed = ko.pureComputed || ko.computed;\n\n    primitiveCompare = function(item1, item2) {\n      if (item2 === null || item2 === undefined) {\n        return item1 === null || item1 === undefined;\n      } else if (item1 !== null && item1 !== undefined) {\n        if ('boolean' === typeof item1) {\n          return item1 === item2;\n        } else {\n          return item1.toString().toLowerCase().indexOf(item2.toString().toLowerCase()) >= 0 || item1 === item2;\n        }\n      } else {\n        return false;\n      }\n    };\n\n    function DataTable(rows, options) {\n      var serverSideOpts;\n      if (!options) {\n        if (!(rows instanceof Array)) {\n          options = rows;\n          rows = [];\n        } else {\n          options = {};\n        }\n      }\n      this.options = {\n        recordWord: options.recordWord || 'record',\n        recordWordPlural: options.recordWordPlural,\n        sortDir: options.sortDir || 'asc',\n        sortField: options.sortField || void 0,\n        perPage: options.perPage || 15,\n        filterFn: options.filterFn || void 0,\n        unsortedClass: options.unsortedClass || '',\n        descSortClass: options.descSortClass || '',\n        ascSortClass: options.ascSortClass || ''\n      };\n      this.initObservables();\n      if ((serverSideOpts = options.serverSidePagination) && serverSideOpts.enabled) {\n        if (!(serverSideOpts.path && serverSideOpts.loader)) {\n          throw new Error(\"`path` or `loader` missing from `serverSidePagination` object\");\n        }\n        this.options.paginationPath = serverSideOpts.path;\n        this.options.resultHandlerFn = serverSideOpts.loader;\n        this.initWithServerSidePagination();\n      } else {\n        this.initWithClientSidePagination(rows);\n      }\n    }\n\n    DataTable.prototype.initObservables = function() {\n      this.sortDir = ko.observable(this.options.sortDir);\n      this.sortField = ko.observable(this.options.sortField);\n      this.perPage = ko.observable(this.options.perPage);\n      this.currentPage = ko.observable(1);\n      this.filter = ko.observable('');\n      this.loading = ko.observable(false);\n      this.rows = ko.observableArray([]);\n    };\n\n    DataTable.prototype.initWithClientSidePagination = function(rows) {\n      var _defaultMatch;\n      this.filtering = ko.observable(false);\n      this.filter.subscribe((function(_this) {\n        return function() {\n          return _this.currentPage(1);\n        };\n      })(this));\n      this.perPage.subscribe((function(_this) {\n        return function() {\n          return _this.currentPage(1);\n        };\n      })(this));\n      this.rows(rows);\n      this.rowAttributeMap = pureComputed((function(_this) {\n        return function() {\n          var attrMap, key, row;\n          rows = _this.rows();\n          attrMap = {};\n          if (rows.length > 0) {\n            row = rows[0];\n            for (key in row) {\n              if (row.hasOwnProperty(key)) {\n                attrMap[key.toLowerCase()] = key;\n              }\n            }\n          }\n          return attrMap;\n        };\n      })(this));\n      this.filteredRows = pureComputed((function(_this) {\n        return function() {\n          var filter, filterFn, sortField;\n          _this.filtering(true);\n          filter = _this.filter();\n          rows = _this.rows.slice(0);\n          if (filter !== '') {\n            filterFn = _this.filterFn(filter);\n            rows = rows.filter(filterFn);\n          }\n          if ((sortField = _this.sortField()) || sortField === 0) {\n            rows.sort(function(a, b) {\n              var aVal, bVal;\n              aVal = ko.utils.unwrapObservable(a[sortField]);\n              bVal = ko.utils.unwrapObservable(b[sortField]);\n              if ('string' === typeof aVal) {\n                aVal = aVal.toLowerCase();\n              }\n              if ('string' == typeof bVal) {\n                bVal = bVal.toLowerCase();\n              }\n              if (_this.sortDir() === 'asc') {\n                if (aVal < bVal || aVal === '' || aVal === null || aVal === undefined) {\n                  return -1;\n                } else {\n                  if (aVal > bVal || bVal === '' || bVal === null || bVal === undefined) {\n                    return 1;\n                  } else {\n                    return 0;\n                  }\n                }\n              } else {\n                if (aVal < bVal || aVal === '' || aVal === null || aVal === undefined) {\n                  return 1;\n                } else {\n                  if (aVal > bVal || bVal === '' || bVal === null || bVal === undefined) {\n                    return -1;\n                  } else {\n                    return 0;\n                  }\n                }\n              }\n            });\n          }\n          _this.filtering(false);\n          return rows;\n        };\n      })(this)).extend({\n        rateLimit: 50,\n        method: 'notifyWhenChangesStop'\n      });\n      this.pagedRows = pureComputed((function(_this) {\n        return function() {\n          var pageIndex, perPage;\n          pageIndex = _this.currentPage() - 1;\n          perPage = _this.perPage();\n          return _this.filteredRows().slice(pageIndex * perPage, (pageIndex + 1) * perPage);\n        };\n      })(this));\n      this.pages = pureComputed((function(_this) {\n        return function() {\n          return Math.ceil(_this.filteredRows().length / _this.perPage());\n        };\n      })(this));\n      this.leftPagerClass = pureComputed((function(_this) {\n        return function() {\n          if (_this.currentPage() === 1) {\n            return 'disabled';\n          }\n        };\n      })(this));\n      this.rightPagerClass = pureComputed((function(_this) {\n        return function() {\n          if (_this.currentPage() === _this.pages()) {\n            return 'disabled';\n          }\n        };\n      })(this));\n      this.total = pureComputed((function(_this) {\n        return function() {\n          return _this.filteredRows().length;\n        };\n      })(this));\n      this.from = pureComputed((function(_this) {\n        return function() {\n          return (_this.currentPage() - 1) * _this.perPage() + 1;\n        };\n      })(this));\n      this.to = pureComputed((function(_this) {\n        return function() {\n          var to;\n          to = _this.currentPage() * _this.perPage();\n          if (to > _this.total()) {\n            return _this.total();\n          } else {\n            return to;\n          }\n        };\n      })(this));\n      this.recordsText = pureComputed((function(_this) {\n        return function() {\n          var from, pages, recordWord, recordWordPlural, to, total;\n          pages = _this.pages();\n          total = _this.total();\n          from = _this.from();\n          to = _this.to();\n          recordWord = _this.options.recordWord;\n          recordWordPlural = _this.options.recordWordPlural || recordWord + 's';\n          if (pages > 1) {\n            return \"\" + from + \" to \" + to + \" of \" + total + \" \" + recordWordPlural;\n          } else {\n            return \"\" + total + \" \" + (total > 1 || total === 0 ? recordWordPlural : recordWord);\n          }\n        };\n      })(this));\n      this.showNoData = pureComputed((function(_this) {\n        return function() {\n          return _this.pagedRows().length === 0 && !_this.loading();\n        };\n      })(this));\n      this.showLoading = pureComputed((function(_this) {\n        return function() {\n          return _this.loading();\n        };\n      })(this));\n      this.sortClass = (function(_this) {\n        return function(column) {\n          return pureComputed(function() {\n            if (_this.sortField() === column) {\n              return 'sorted ' + (_this.sortDir() === 'asc' ? _this.options.ascSortClass : _this.options.descSortClass);\n            } else {\n              return _this.options.unsortedClass;\n            }\n          });\n        };\n      })(this);\n      this.addRecord = (function(_this) {\n        return function(record) {\n          return _this.rows.push(record);\n        };\n      })(this);\n      this.removeRecord = (function(_this) {\n        return function(record) {\n          _this.rows.remove(record);\n          if (_this.pagedRows().length === 0) {\n            return _this.prevPage();\n          }\n        };\n      })(this);\n      this.replaceRows = (function(_this) {\n        return function(rows) {\n          _this.rows(rows);\n          _this.currentPage(1);\n          return _this.filter(void 0);\n        };\n      })(this);\n      _defaultMatch = function(filter, row, attrMap) {\n        var key, val;\n        return ((function() {\n          var _results;\n          _results = [];\n          for (key in attrMap) {\n            val = attrMap[key];\n            _results.push(val);\n          }\n          return _results;\n        })()).some(function(val) {\n          return primitiveCompare((ko.isObservable(row[val]) ? row[val]() : row[val]), filter);\n        });\n      };\n      this.filterFn = this.options.filterFn || (function(_this) {\n        return function(filterVar) {\n          var filter = [], specials = {};\n          filterVar.split(' ').forEach(function(word) {\n            var words;\n            if (word.indexOf(':') >= 0) {\n              words = word.split(':');\n              specials[words[0]] = (function() {\n                switch (words[1].toLowerCase()) {\n                  case 'yes':\n                  case 'true':\n                    return true;\n                  case 'no':\n                  case 'false':\n                    return false;\n                  case 'blank':\n                  case 'none':\n                  case 'null':\n                  case 'undefined':\n                    return void 0;\n                  default:\n                    return words[1].toLowerCase();\n                }\n              })();\n            } else {\n              filter.push(word);\n            }\n          });\n          filter = filter.join(' ');\n          return function(row) {\n            var conditionals = [], key, val;\n            for (key in specials) {\n              val = specials[key];\n              var rowAttr = _this.rowAttributeMap()[key.toLowerCase()];\n              if (rowAttr) {\n                conditionals.push(primitiveCompare((ko.isObservable(row[rowAttr]) ? row[rowAttr]() : row[rowAttr]), val));\n              } else {\n                conditionals.push(false);\n              }\n            }\n            return (__indexOf.call(conditionals, false) < 0) && (filter !== '' ? ('function' === typeof row.match ? row.match(filter) : _defaultMatch(filter, row, _this.rowAttributeMap())) : true);\n          };\n        };\n      })(this);\n    };\n\n    DataTable.prototype.initWithServerSidePagination = function() {\n      var _gatherData, _getDataFromServer;\n      _getDataFromServer = (function(_this) {\n        return function(data, cb) {\n          var key, req, url, val;\n          url = \"\" + _this.options.paginationPath + \"?\" + (((function() {\n            var _results;\n            _results = [];\n            for (key in data) {\n              val = data[key];\n              _results.push(\"\" + (encodeURIComponent(key)) + \"=\" + (encodeURIComponent(val)));\n            }\n            return _results;\n          })()).join('&'));\n          req = new XMLHttpRequest();\n          req.open('GET', url, true);\n          req.setRequestHeader('Content-Type', 'application/json');\n          req.onload = function() {\n            if (req.status >= 200 && req.status < 400) {\n              return cb(null, JSON.parse(req.responseText));\n            } else {\n              return cb(new Error(\"Error communicating with server\"));\n            }\n          };\n          req.onerror = function() {\n            return cb(new Error(\"Error communicating with server\"));\n          };\n          return req.send();\n        };\n      })(this);\n      _gatherData = function(perPage, currentPage, filter, sortDir, sortField) {\n        var data;\n        data = {\n          perPage: perPage,\n          page: currentPage\n        };\n        if (filter || filter === 0) {\n          data.filter = filter;\n        }\n        if ((sortDir || sortDir === 0) && (sortField || sortField === 0)) {\n          data.sortDir = sortDir;\n          data.sortBy = sortField;\n        }\n        return data;\n      };\n      this.filtering = ko.observable(false);\n      this.pagedRows = ko.observableArray([]);\n      this.numFilteredRows = ko.observable(0);\n      this.filter.subscribe((function(_this) {\n        return function() {\n          return _this.currentPage(1);\n        };\n      })(this));\n      this.perPage.subscribe((function(_this) {\n        return function() {\n          return _this.currentPage(1);\n        };\n      })(this));\n      ko.computed((function(_this) {\n        return function() {\n          var data;\n          _this.loading(true);\n          _this.filtering(true);\n          data = _gatherData(_this.perPage(), _this.currentPage(), _this.filter(), _this.sortDir(), _this.sortField());\n          return _getDataFromServer(data, function(err, response) {\n            var results, total;\n            _this.loading(false);\n            _this.filtering(false);\n            if (err) {\n              return console.log(err);\n            }\n            total = response.total;\n            results = response.results;\n            _this.numFilteredRows(total);\n            return _this.pagedRows(results.map(_this.options.resultHandlerFn));\n          });\n        };\n      })(this)).extend({\n        rateLimit: 500,\n        method: 'notifyWhenChangesStop'\n      });\n      this.pages = pureComputed((function(_this) {\n        return function() {\n          return Math.ceil(_this.numFilteredRows() / _this.perPage());\n        };\n      })(this));\n      this.leftPagerClass = pureComputed((function(_this) {\n        return function() {\n          if (_this.currentPage() === 1) {\n            return 'disabled';\n          }\n        };\n      })(this));\n      this.rightPagerClass = pureComputed((function(_this) {\n        return function() {\n          if (_this.currentPage() === _this.pages()) {\n            return 'disabled';\n          }\n        };\n      })(this));\n      this.from = pureComputed((function(_this) {\n        return function() {\n          return (_this.currentPage() - 1) * _this.perPage() + 1;\n        };\n      })(this));\n      this.to = pureComputed((function(_this) {\n        return function() {\n          var to, total;\n          to = _this.currentPage() * _this.perPage();\n          if (to > (total = _this.numFilteredRows())) {\n            return total;\n          } else {\n            return to;\n          }\n        };\n      })(this));\n      this.recordsText = pureComputed((function(_this) {\n        return function() {\n          var from, pages, recordWord, recordWordPlural, to, total;\n          pages = _this.pages();\n          total = _this.numFilteredRows();\n          from = _this.from();\n          to = _this.to();\n          recordWord = _this.options.recordWord;\n          recordWordPlural = _this.options.recordWordPlural || recordWord + 's';\n          if (pages > 1) {\n            return \"\" + from + \" to \" + to + \" of \" + total + \" \" + recordWordPlural;\n          } else {\n            return \"\" + total + \" \" + (total > 1 || total === 0 ? recordWordPlural : recordWord);\n          }\n        };\n      })(this));\n      this.showNoData = pureComputed((function(_this) {\n        return function() {\n          return _this.pagedRows().length === 0 && !_this.loading();\n        };\n      })(this));\n      this.showLoading = pureComputed((function(_this) {\n        return function() {\n          return _this.loading();\n        };\n      })(this));\n      this.sortClass = (function(_this) {\n        return function(column) {\n          return pureComputed(function() {\n            if (_this.sortField() === column) {\n              return 'sorted ' + (_this.sortDir() === 'asc' ? _this.options.ascSortClass : _this.options.descSortClass);\n            } else {\n              return _this.options.unsortedClass;\n            }\n          });\n        };\n      })(this);\n      this.addRecord = function() {\n        throw new Error(\"#addRecord() not applicable with serverSidePagination enabled\");\n      };\n      this.removeRecord = function() {\n        throw new Error(\"#removeRecord() not applicable with serverSidePagination enabled\");\n      };\n      this.replaceRows = function() {\n        throw new Error(\"#replaceRows() not applicable with serverSidePagination enabled\");\n      };\n      this.refreshData = (function(_this) {\n        return function() {\n          var data;\n          _this.loading(true);\n          _this.filtering(true);\n          data = _gatherData(_this.perPage(), _this.currentPage(), _this.filter(), _this.sortDir(), _this.sortField());\n          return _getDataFromServer(data, function(err, response) {\n            var results, total;\n            _this.loading(false);\n            _this.filtering(false);\n            if (err) {\n              return console.log(err);\n            }\n            total = response.total;\n            results = response.results;\n            _this.numFilteredRows(total);\n            return _this.pagedRows(results.map(_this.options.resultHandlerFn));\n          });\n        };\n      })(this);\n    };\n\n    DataTable.prototype.toggleSort = function(field) {\n      return (function(_this) {\n        return function() {\n          _this.currentPage(1);\n          if (_this.sortField() === field) {\n            return _this.sortDir(_this.sortDir() === 'asc' ? 'desc' : 'asc');\n          } else {\n            _this.sortDir('asc');\n            return _this.sortField(field);\n          }\n        };\n      })(this);\n    };\n\n    DataTable.prototype.prevPage = function() {\n      var page;\n      page = this.currentPage();\n      if (page !== 1) {\n        return this.currentPage(page - 1);\n      }\n    };\n\n    DataTable.prototype.nextPage = function() {\n      var page;\n      page = this.currentPage();\n      if (page !== this.pages()) {\n        return this.currentPage(page + 1);\n      }\n    };\n\n    DataTable.prototype.gotoPage = function(page) {\n      return (function(_this) {\n        return function() {\n          return _this.currentPage(page);\n        };\n      })(this);\n    };\n\n    DataTable.prototype.pageClass = function(page) {\n      return pureComputed((function(_this) {\n        return function() {\n          if (_this.currentPage() === page) {\n            return 'active';\n          }\n        };\n      })(this));\n    };\n\n    return DataTable;\n\n  })();\n\n}).call(this);\n"],"sourceRoot":"/source/"}