(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};this.DataTable=function(){function b(a,b){var c=this;if(null==b.sortField)throw new Error("sortField must be supplied.");this.options={recordWord:b.recordWord||"record",recordWordPlural:b.recordWordPlural,sortDir:b.sortDir||"asc",sortField:b.sortField,perPage:b.perPage||15,filterFn:b.filterFn||void 0,sortIconClass:b.sortIconClass||"icon-sort",sortDescIconClass:b.sortDescIconClass||"icon-sort-down",sortAscIconClass:b.sortAscIconClass||"icon-sort-up"},this.sortDir=ko.observable(this.options.sortDir),this.sortField=ko.observable(this.options.sortField),this.perPage=ko.observable(this.options.perPage),this.currentPage=ko.observable(1),this.filter=ko.observable(""),this.loading=ko.observable(!1),this.filter.subscribe(function(){return c.currentPage(1)}),this.rows=ko.observableArray(a),this.rowAttributeMap=ko.computed(function(){var b,d,e;if(a=c.rows(),b={},a.length>0){e=a[0];for(d in e)e.hasOwnProperty(d)&&(b[d.toLowerCase()]=d)}return b}),this.filteredRows=ko.computed(function(){var b,d;return b=c.filter(),a=c.rows(),""!==b&&(d=c.filterFn(b),a=a.filter(d)),a.sort(function(a,b){var d,e;return d=ko.utils.unwrapObservable(a[c.sortField()]),e=ko.utils.unwrapObservable(b[c.sortField()]),"string"==typeof d&&(d=d.toLowerCase()),"string"==typeof e&&(e=e.toLowerCase()),"asc"===c.sortDir()?e>d||""===d||null==d?-1:d>e||""===e||null==e?1:0:e>d||""===d||null==d?1:d>e||""===e||null==e?-1:0})}),this.pagedRows=ko.computed(function(){var a,b;return a=c.currentPage()-1,b=c.perPage(),c.filteredRows().slice(a*b,(a+1)*b)}),this.pages=ko.computed(function(){return Math.ceil(c.filteredRows().length/c.perPage())}),this.leftPagerClass=ko.computed(function(){return 1===c.currentPage()?"disabled":void 0}),this.rightPagerClass=ko.computed(function(){return c.currentPage()===c.pages()?"disabled":void 0}),this.total=ko.computed(function(){return c.filteredRows().length}),this.from=ko.computed(function(){return(c.currentPage()-1)*c.perPage()+1}),this.to=ko.computed(function(){var a;return a=c.currentPage()*c.perPage(),a>c.total()?c.total():a}),this.recordsText=ko.computed(function(){var a,b,d,e,f,g;return b=c.pages(),g=c.total(),a=c.from(),f=c.to(),d=c.options.recordWord,e=c.options.recordWordPlural||d+"s",b>1?""+a+" to "+f+" of "+g+" "+e:""+g+" "+(g>1||0===g?e:d)}),this.showNoData=ko.computed(function(){return 0===c.pagedRows().length&&!c.loading()}),this.showLoading=ko.computed(function(){return c.loading()}),this.sortClass=function(a){return ko.computed(function(){return c.sortField()===a?"asc"===c.sortDir()?c.options.sortAscIconClass:c.options.sortDescIconClass:c.options.sortIconClass})}}var c;return c=function(a,b){return null==b?null==a:null!=a&&null!=b?"boolean"==typeof a?a===b:a.toString().toLowerCase().indexOf(b.toString().toLowerCase())>=0||a===b:!1},b.prototype.toggleSort=function(a){var b=this;return function(){return b.sortField()===a?b.sortDir("asc"===b.sortDir()?"desc":"asc"):(b.sortDir("asc"),b.sortField(a))}},b.prototype.prevPage=function(){var a;return a=this.currentPage(),1!==a?this.currentPage(a-1):void 0},b.prototype.nextPage=function(){var a;return a=this.currentPage(),a!==this.pages()?this.currentPage(a+1):void 0},b.prototype.gotoPage=function(a){var b=this;return function(){return b.currentPage(a)}},b.prototype.pageClass=function(a){var b=this;return ko.computed(function(){return b.currentPage()===a?"active":void 0})},b.prototype.defaultMatch=function(a,b,d){var e,f;return console.log(a),console.log(b),console.log(d),function(){var a;a=[];for(e in d)f=d[e],a.push(f);return a}().some(function(d){return c(ko.isObservable(b[d])?b[d]():b[d],a)})},b.prototype.filterFn=function(b){var d,e,f,g,h;return null!=this.options.filterFn?this.options.filterFn(b):(h=[[],{}],f=h[0],g=h[1],b.split(" ").forEach(function(a){var b;return a.indexOf(":")>=0?(b=a.split(":"),g[b[0]]=function(){switch(b[1].toLowerCase()){case"yes":case"true":return!0;case"no":case"false":return!1;case"blank":case"none":case"null":case"undefined":return void 0;default:return b[1].toLowerCase()}}()):f.push(a)}),f=f.join(" "),e=this.defaultMatch,d=this.rowAttributeMap(),function(b){var h,i,j;return h=function(){var a;a=[];for(i in g)j=g[i],a.push(function(a,e){var f;return(f=d[a.toLowerCase()])?c(ko.isObservable(b[f])?b[f]():b[f],e):!1}(i,j));return a}.call(this),a.call(h,!1)<0&&(""!==f?null!=b.match?b.match(f):e(f,b,d):!0)})},b}()}).call(this);